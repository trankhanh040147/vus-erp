-- P10101_EMP_EDUCATION_ID

-- P10101_DEFAULT_IMAGES_NAME
SELECT CASE
    WHEN :P10101_EMP_EDUCATION_ID IS NOT NULL THEN
        (SELECT ATTACH_NAME FROM EMP_EDUCATION WHERE ID = :P10101_EMP_EDUCATION_ID)
    ELSE 
        (SELECT ATTACHMENT_NAME FROM TEMP_UPLOAD WHERE TEMP_ID = to_number(:P10101_TEMP_ID) AND TABLE_NAME = 'EMP_EDUCATION')
END AS ATTACHMENT_NAME
FROM DUAL


-- P10101_DEFAULT_IMAGES_NAME v2
 

-- SELECT CASE
--     WHEN :P10101_EMP_EDUCATION_ID IS NOT NULL AND :P10101_EMP_EDUCATION_ID != '' THEN
--         (SELECT ATTACH_NAME from EMP_EDUCATION where ID = :P10101_EMP_EDUCATION_ID)
--     ELSIF 
--         (SELECT ATTACHMENT_NAME FROM TEMP_UPLOAD where TEMP_ID = to_number(:P10101_TEMP_ID) AND TABLE_NAME = 'EMP_EDUCATION')
-- END FROM DUAL

SELECT COALESCE(
         (SELECT ATTACH_NAME FROM EMP_EDUCATION WHERE ID = :P10101_EMP_EDUCATION_ID),
         (SELECT ATTACHMENT_NAME FROM TEMP_UPLOAD WHERE TEMP_ID = TO_NUMBER(:P10101_TEMP_ID) AND TABLE_NAME = 'EMP_EDUCATION')
       ) AS ATTACH_NAME
FROM DUAL
WHERE :P10101_EMP_EDUCATION_ID IS NOT NULL AND :P10101_EMP_EDUCATION_ID != '';



-- P10101_DEFAULT_IMAGES_URL
SELECT CASE
    WHEN :P10101_EMP_EDUCATION_ID IS NOT NULL THEN
        (SELECT ATTACH_URL FROM EMP_EDUCATION WHERE ID = :P10101_EMP_EDUCATION_ID)
    ELSE ''
END AS ATTACHMENT_URL
FROM DUAL



-- P10101_DEFAULT_IMAGES_URL v2
SELECT COALESCE(
         (SELECT ATTACH_NAME FROM EMP_EDUCATION WHERE ID = :P10101_EMP_EDUCATION_ID),
         (SELECT ATTACHMENT_URL FROM TEMP_UPLOAD WHERE TEMP_ID = TO_NUMBER(:P10101_TEMP_ID) AND TABLE_NAME = 'EMP_EDUCATION')
       ) AS ATTACH_URL
FROM DUAL
WHERE :P10101_EMP_EDUCATION_ID IS NOT NULL AND :P10101_EMP_EDUCATION_ID != '';
