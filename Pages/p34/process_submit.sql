-- Update record status of P_TIME_SHEET
-- page variable:
-- P34_EMPLOYEE_NAME
-- P34_DATE_DEFAULT
-- P34_DATE_TO
-- P34_DATE_FROM

begin

    if trim(:P34_EMPLOYEE_NAME) = 'all' then
        -- case when select all employee
        UPDATE P_TIME_SHEET
        SET STATUS = 12
        WHERE STATUS IN (3,4)
        AND DATE_TS BETWEEN :P34_DATE_FROM AND :P34_DATE_TO;

        -- write log
        INSERT INTO OUTPUT_LOGS (DATE1, STR1, STR2, STR3)
        VALUES (sysdate, 'TIMESHEET: SUBMIT_TO_HR', 'ALL', 'From: ' || :P34_DATE_FROM || ' To: ' || :P34_DATE_TO);
    else
        -- case when select a specific employee
        UPDATE P_TIME_SHEET 
        SET STATUS = 12
        WHERE STATUS IN (3,4)
        AND EMPLOYEE_CODE = :P34_EMPLOYEE_NAME
        AND DATE_TS BETWEEN :P34_DATE_FROM AND :P34_DATE_TO;

        -- write log
        INSERT INTO OUTPUT_LOGS (DATE1, STR1, STR2, STR3)
        VALUES (sysdate, 'TIMESHEET: SUBMIT_TO_HR', :P34_EMPLOYEE_NAME, 'From: ' || :P34_DATE_FROM || ' To: ' || :P34_DATE_TO);
    end if; 

    commit;
end;

-- table: P_TIME_SHEET
--   CREATE TABLE "P_TIME_SHEET" 
--    (	"ID" NUMBER(8,0) GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
-- 	"EMPLOYEE_CODE" NVARCHAR2(50) COLLATE "USING_NLS_COMP", 
-- 	"WORKER_ID" NVARCHAR2(50) COLLATE "USING_NLS_COMP", 
-- 	"DATE_TS" DATE, 
-- 	"REASON_ADJUSTMENT" NVARCHAR2(100) COLLATE "USING_NLS_COMP", 
-- 	"IS_OK" NUMBER(1,0) DEFAULT 0, 
-- 	"STATUS" NUMBER, 
-- 	"NOTE" NVARCHAR2(100) COLLATE "USING_NLS_COMP", 
-- 	"TS_HEADER_ID" NVARCHAR2(50) COLLATE "USING_NLS_COMP" NOT NULL ENABLE, 
-- 	"PROFILE_ID" NVARCHAR2(30) COLLATE "USING_NLS_COMP", 
-- 	 CONSTRAINT "P_TIME_SHEET_PK" PRIMARY KEY ("ID")

-- table: OUTPUT_LOGS
--   CREATE TABLE "OUTPUT_LOGS" 
--    (	"ID" NUMBER(5,0) GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
-- 	"DATE1" DATE, 
-- 	"DATE2" DATE, 
-- 	"DATE3" DATE, 
-- 	"STR1" NVARCHAR2(200) COLLATE "USING_NLS_COMP", 
-- 	"STR2" NVARCHAR2(5000) COLLATE "USING_NLS_COMP", 
-- 	"STR3" NVARCHAR2(5000) COLLATE "USING_NLS_COMP", 
-- 	"NUMBER1" NUMBER(5,0), 
-- 	"NUMBER2" NUMBER(5,0), 
-- 	 CONSTRAINT "OUTPUT_LOGS_PK" PRIMARY KEY ("ID")
--   USING INDEX  ENABLE
--    )  DEFAULT COLLATION "USING_NLS_COMP" ;
